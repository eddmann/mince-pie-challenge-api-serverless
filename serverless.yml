service: mince-pie-challenge-api

provider:
  name: aws
  runtime: nodejs8.10
  stage: ${opt:stage, 'offline'}
  region: eu-west-1
  environment:
    USER_POOL_ID: ${file(./config.${self:provider.stage}.yml):userPoolId}
    TABLE_NAME: ${file(./config.${self:provider.stage}.yml):tableName}
  iamRoleStatements: ${file(./roles.yml)}

custom:
  webpack:
    webpackConfig: ./webpack.config.js
    includeModules:
      forceExclude:
        - aws-sdk
  serverless-offline:
    host: 0.0.0.0
    port: 3000
  dynamodb:
    start:
      host: dynamodb
      port: 8000

plugins:
  - serverless-webpack
  - serverless-dynamodb-local
  - serverless-offline

package:
  individually: true

resources: ${file(./resources.yml)}

functions: ${file(./functions.yml)}
